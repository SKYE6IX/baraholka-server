{"version":3,"file":"Ad.js","sourceRoot":"/","sources":["models/Ad.ts"],"names":[],"mappings":"AAAA,OAAO,YAAY,MAAM,QAAQ,CAAC;AAGlC,MAAM,EAAE;IASJ,YAAY,OAAe;QACvB,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;QAC7B,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;QAC3B,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;QACvC,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;QAC3B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;QACjC,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;IACrC,CAAC;IAEM,KAAK,CAAC,WAAW,CAAC,MAAe;QACpC,MAAM,EAAE,GAAG,MAAM,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC;YACpC,IAAI,EAAE;gBACF,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,WAAW,EAAE,IAAI,CAAC,WAAW;gBAC7B,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,MAAM,EAAE,IAAI,CAAC,MAAM;gBACnB,MAAM,EAAE;oBACJ,UAAU,EAAE;wBACR,IAAI,EAAE,MAAM;qBACf;iBACJ;gBACD,MAAM,EAAE,IAAI,CAAC,MAAM;gBACnB,QAAQ,EAAE;oBACN,MAAM,EAAE;wBACJ,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO;wBAC9B,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI;wBACxB,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,QAAQ;qBACnC;iBACJ;aACJ;SACJ,CAAC,CAAC;QACH,OAAO,EAAE,CAAC;IACd,CAAC;IACM,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAY;QACrC,MAAM,QAAQ,GAAG,MAAM,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC;YAC1C,KAAK,EAAE;gBACH,EAAE,EAAE,IAAI;aACX;YACD,OAAO,EAAE;gBACL,MAAM,EAAE,IAAI;aACf;SACJ,CAAC,CAAC;QACH,OAAO,QAAQ,CAAC;IACpB,CAAC;CACJ;AACD,eAAe,EAAE,CAAC","sourcesContent":["import prismaClient from \"prisma\";\nimport { BaseAd, Location, Image } from \"types/ad\";\n\nclass Ad {\n    private userId: string;\n    private title: string;\n    private description: string;\n    private price: number;\n    private currency: \"GEL\" | \"USD\";\n    private source: \"TELEGRAM_AD\" | \"SITE_AD\";\n    private location: Location;\n\n    constructor(adsData: BaseAd) {\n        this.userId = adsData.userId;\n        this.title = adsData.title;\n        this.description = adsData.description;\n        this.price = adsData.price;\n        this.currency = adsData.currency;\n        this.source = adsData.source;\n        this.location = adsData.location;\n    }\n\n    public async insertNewAd(images: Image[]) {\n        const ad = await prismaClient.ad.create({\n            data: {\n                title: this.title,\n                description: this.description,\n                price: this.price,\n                currency: this.currency,\n                source: this.source,\n                images: {\n                    createMany: {\n                        data: images,\n                    },\n                },\n                userId: this.userId,\n                location: {\n                    create: {\n                        country: this.location.country,\n                        city: this.location.city,\n                        location: this.location.location,\n                    },\n                },\n            },\n        });\n        return ad;\n    }\n    public static async removeAd(adId: string) {\n        const response = await prismaClient.ad.delete({\n            where: {\n                id: adId,\n            },\n            include: {\n                images: true,\n            },\n        });\n        return response;\n    }\n}\nexport default Ad;\n"]}